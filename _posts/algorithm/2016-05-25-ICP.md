---
layout: post
title:  "ICP算法理解"
categories: algorithm
tags:  algorithm 3d align
author: Tandy
---

* content
{:toc}

关于ICP算法的一些整理




## 经典ICP

ICP的目的很简单，就是求解两堆点云之间的变换关系。怎么做呢？思路很自然，既然不知道R和t(针对刚体运动)，那我们就假设为未知量呗，然后通过某些方法求解。下面我们来看看具体怎么求的～没办法，要把问题描述清楚，数学是少不了的了。假设有两堆点云，分别记为两个集合X=x1,x2,...,xm和Y=y1,y2,...,ym（m并不总是等于n）。然后呢，我们不失一般性的，假设两个点云之间的变换为R（旋转变换）和t（平移变换），这两个就是我们要求的东西啦～那我们将求解这个问题描述成最小化均方误差： 


![]({{ site.baseurl }}/images/201705/32.png)


经典的ICP方法对上面的优化问题的处理思路如下： 

（1）初始化R 和 t 

　　确定初始的R 和 t 的方法很多，如果什么方法都不知道，那随便赋一个R 和 t ，然后就迭代的算呀。随便给一个值从原理上来说也可以得到最终的一个结果呀，但是准不准就不知道了。相信有基本的优化概念的人都知道，初始值的选取很重要，如果初始值选的不好很容易收敛到一个局部最优解，然后局部最优解好不好那就另说了。ICP发展了这么多年了，当然有很多的方法来估计初始的R和t了，像PCL给的SampleConsensusInitalAlignment函数以及TransformationEstimationSVD函数都可以得到较好的初始估计。 

（2）迭代 

　　得到初始的估计后，接下来的步骤就顺理成章了：对于X中的每一个点用当前的R 和 t在Y中找最近的点（比如用欧式距离），然后这两个点就成了一对了～就这样，对所有的点都这么做一次，然后我们就得到了所有的匹配对了～然后呢，用每一对的坐标列一个方程，就得到一系列的方程。然后就求解最优的R和t最小化上面的误差。如此循环往复。

（未完待续。。。）