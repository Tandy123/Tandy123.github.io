---
layout:     post
title:      "【数字几何处理】网格数据结构"
date:       2017-06-02 12:00:00
author:     "Tandy"
---

这段时间重新翻开了《Polygon Mesh Process》，感觉有必要总结一些东西了，就从比较简单的数据结构开始吧



## 综述

几何建模的算法的效率和存储消耗很大程度上依赖于曲面网格的数据结构，这里简单介绍一些在文献当中最常见的数据结构。

选择一种好的网格数据结构需要考虑拓扑和算法两方面的因素：

- 拓扑需求。	需要通过数据结构来表示的是哪一种类型的网格？我们是否需要表示2-流形网格或者是复杂的边和独立的顶点？我们是只表示单纯的我那个或者我们需要去表示任意的多边形网格？网格是否是规则的或者是不规则的（regular, semi-regular, irregular）？我们是否需要构建一个不断细化的网格层次结构？以上都是基于拓扑需求需要考虑的问题。
- 算法需求。	我们需要在该数据结构中运用哪些算法？我们是想简单地渲染一个网格，或者是需要高效遍历顶点、边和面的邻域？网格是静态的或者是随时间变化的？我们是否需要将网格的点线面和额外的数据关联起来?考虑到存储消耗时，我们是否有特定的需求？以上都是基于算法需求需要考虑的问题。

评价一个数据结构需要测量各种标准，比如：（a）预处理是构建的时间，（b）进行一个特定查询的时间，（c）进行一个特定操作的时间和（d）内存消耗和冗余。针对一个特定的算法设计一个数据结构并不罕见，在几何处理中，有许多常见的数据结构，下面具体介绍：

## 基于面的数据结构

一个曲面最简答的表示方法就是存储一组多边形面片，这些面片用顶点进行表示。对于最简单的三角网格，每个面存储了三个顶点的位置，当使用32位单精度数字来表示点的坐标时，每个三角形需要3X3X4=36字节。由欧拉公式（V-E+F=2(1-g)）可知面的数量往往等于两倍的顶点数量，所以这种数据结构平均消耗72字节/顶点，因为它不能表示网格的连接，通常称为三角形汤（triangle soup）或多边形汤（polygon soup）。一些数据格式的文件，例如STL文件就是使用这种表示方法。

    上述存储空间推导过程，下面遇到类似的情况同理：
	设一共有n个顶点，则有2n个面
	每个面需要36字节，则总共需要36*2n字节
	对于每个顶点需要的存储空间为：36*2n/n=72字节/顶点

然而，这种表示方法在大部分应用中的效率并不高，不能显式地获取连接信息，同时顶点和相关的数据重复的次数等于每个顶点的度数。这些冗余可以通过引入索引面集合或者共享点的数据结构来得到避免，这种结构存储了一组顶点和并将多边形通过这组顶点的索引进行编码。对于三角网格的情况，我们使用32位来存储顶点坐标和面的索引，这种表示方法对于每个顶点需要12字节，对于每个面也是12字节，因此，总共消耗12字节/顶点+12字节/面=36字节/顶点，是上一种基于面的数据结构的一半。

![Face-set data structrue and indexed face-set data structure for triangle meshes][1]

[1]: {{ site.baseurl }}/images/201706/1.png "Face-set data structrue and indexed face-set data structure for triangle meshes"


















翻译自《Polygon Mesh Processing》第二章-Mesh Data Structure
